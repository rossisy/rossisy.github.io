---
layout: post
title: "vi basic"
date: 2018-03-03 10:00:00 +0800
categories: vi
---
# vi introduction
## vi的3种模式
**1.一般模式**

以vi打开一个文件就直接进入一般模式（默认模式）。在此模式下可以移动光标、删除字符或整行、复制和粘贴数据

**2.编辑模式**

在一般模式下，按下“i，I，o，O，a，A，r，R”中任何一个字母后会进入编辑模式。在此模式下可以编辑文件的内容。返回一般模式则需按下【esc】。

**3.命令行模式**

在一般模式下，按下“:，/，?”中任何一个键，光标移动到窗口的最下方，进入命令行模式。在此模式下可以查询或替换字符，读取、保存及离开vi等操作也是在命令行模式下完成的。返回一般模式需按下【esc】。

## 3种模式下的按键功能
**1.一般模式下可用的按键说明**

**移动光标的方法：**

|按键|功能|
|:-:|:-|
|h或左方向键|光标向左移动一个字符|
|j或下方向键|光标向下移动一个字符|
|k或上方向键|光标向上移动一个字符|
|l或右方向键|光标向右移动一个字符|
|[Ctrl+f]|屏幕向下移动一页，相当于[Page Down]按键（常用）|
|[Ctrl+b]|屏幕向上移动一页，相当于[Page Up]按键（常用）|
|[Ctrl+d]|屏幕向下移动半页|
|[Ctrl+u]|屏幕向上移动半页|
|+|光标移动到非空格符的下一行|
|-|光标移动到非空格符的上一行|
|n\<space\>|n表示数字。按下数字后再按空格键，光标会向右移动n个字符|
|0或功能键[Home]|这是数字0；移动到这一行的第一个字符处（常用）|
|$或功能键[End]|移动到这一行的最后一个字符处（常用）|
|H|光标移动到这个屏幕的最上方那一行的第一个字符|
|M|光标移动到这个屏幕的中央那一行的第一个字符|
|L|光标移动到这个屏幕的最下方那一行的第一个字符|
|G|光标移动到这个文件的最后一行（常用）|
|nG|n为数字，移动到这个文件的第n行|
|gg|移动到这个文件的第一行，相当于1G（常用）|
|n[Enter]|n为数字。光标向下移动n行（常用）|

**查找与替换：**

|按键|功能|
|:-:|:-|
|/word|向下查找一个名称为word的字符串|
|?word|向上查找一个名称为word的字符串|
|n|n为英文按键。代表重复前一个查找的操作|
|N|N为英文按键。与n相反，为反向进行前一个查找操作|
|:n1,n2s/word1/word2/g|n1与n2为数字。在第n1与n2行之间寻找word1这个字符串，并将该字符串替换为word2（常用）|
|:1,$s/word1/word2/g|从第一行到最后一行查找word1字符串，并将该字符串替换为word2（常用）|
|:1,$s/word1/word2/gc|从第一行到最后一行查找word1字符串，并将该字符串替换为word2，且在替换前显示提示字符给用户确认是否要替换（常用）|

**删除、复制与粘贴：**

|按键|功能|
|:-:|:-|
|x,X|在一行字当中，x为向后删除一个字符（相当于[Del]按键），X为向前删除一个字符（相当于[Backspace]）（常用）|
|nx|n为数字，连续向后删除n个字符|
|dd|删除光标所在的那一整行（常用）|
|ndd|n为数字，删除光标所在的向下n行|
|d1G|删除光标所在到第一行的所有数据|
|dG|删除从光标所在到最后一行的所有数据|
|d$|删除从光标所在处到改行的最后一个字符|
|d0|那个是数字的0，删除从光标所在处到该行的第一个字符|
|yy|复制光标所在的那一行（常用）|
|nyy|n为数字，复制光标所在的向下n行（常用）|
|y1G|复制光标所在行到第一行的所有数据|
|yG|复制光标所在行到最后一行的所有数据|
|y0|复制光标所在的那个字符到该行行首的所有数据|
|y$|复制光标所在的那个字符到该行行尾的所有数据|
|p,P|p为将以复制的数据在光标下一行粘贴，P则为粘贴在光标上一行（常用）|
|J|将光标所在行与下一行的数据结合成同一行|
|c|重复删除多个数据，如向下删除10行，[10cj]|
|u|复原前一个操作，后退（常用）|
|[Ctrl+r]|重做上一个操作，前进（常用）|
|.|小数点按钮，意思是重复前一个操作的意思（常用）|

**2.进入插入或替换的编辑模式的按键说明**

|按键|功能|
|:-:|:-|
|i,I|进入插入模式，i为从目前光标所在处插入，I为在目前所在行的第一个非空格符处开始插入（常用）|
|a,A|进入插入模式，a为从目前光标所在处的下一个字符处开始插入，A为从光标所在行的最后一个字符处开始插入|
|o,O|进入插入模式，这是英文字母o的大小写，o为在目前光标所在的下一行处插入新的一行，O为在目前光标所在处的上一行插入新的一行（常用）|
|r,R|进入替换模式，r只会替换光标所在的那一个字符一次，R会一直替换光标所在的文字，直到按下[esc]键为止（常用）|
|[esc]|退出编辑模式，回到一般模式中（常用）|

**3.一般模式切换到命令行模式的按键说明**

|按键|功能|
|:-:|:-|
|:w|将编辑的数据写入硬盘文件中（常用）|
|:w!|若文件属性为“只读”时，强制写入该文件|
|:q|离开vi（常用）|
|:q!|若曾修改过文件，又不想存储，使用“!”为强制离开不保存文件|
|:wq|保存后离开，若为“:wq!”则为强制保存后离开（常用）|
|ZZ|这是大写的Z。若文件没有修改，则不保存离开，若文件已经被修改过，则保存后离开|
|:w [filename]|将编辑的数据保存成另一个文件（类似于另存文件）|
|:r [filename]|在编辑的数据中，读入另一个文件的数据，即将“filename”这个文件内容加到光标所在行后面|
|:n1,n2 w [filename]|将n1到n2的内容保存成filename这个文件|
|:!command|暂时离开vi到命令行模式下执行command的显示结果|
|:setnu|显示行号，设置之后会在每一行的前缀显示该行的行号|
|:setnonu|与setnu相反，为取消行号|

## vim的块选择（Visual Block）

**块选择的按键意义：**

|按键|功能|
|:-:|:-|
|v|进入可视模式的字符选择（VISUAL），将光标经过的地方反白选择|
|V|进入可视模式的行选择（VISUAL LINE），会将光标经过的行反白选择|
|[Ctrl+v]|进入可视模式的块选择（VISUAL BLOCK），可以用长方形的方式选择数据|
|y|将反白的地方复制起来|
|d|删除所选区域|
|D|删除所选区域及所在行至行尾的数据|
|o,O|进入VISUAL BLOCK后，在所选区域的四个顶点间切换|
|I|进入VISUAL BLOCK后，在所选区域的前面插入数据（区域内所有行相同位置插入相同数据），[esc]退出插入模式|
|p,P|粘贴复制的块|

## 多文件编辑
vim可以同时打开好几个文件进行编辑，这样就可以在打开的文件中复制粘贴数据。

用vim打开多个文件后，用于文件切换的按键功能如下：  
|按键|功能|
|:-:|:-|
|:n|编辑下一个文件|
|:N|编辑上一个文件|
|:files|列出目前这个vim打开的所有文件|

## 多窗口编辑
vim有一个多窗口功能，可以将一个文件显示在多个窗口中，每个窗口分别显示该文件不同位置的内容，也可以用多窗口显示不同的文件以便对比或同时编辑。

在vim的命令行模式中，输入“:sp [filename]”即可启动一个新的窗口显示内容。filename用于指定在新窗口显示的文件，如不指定filename则显示当前文件内容。

启用多窗口功能时的按键功能如下：

|按键|功能|
|:-:|:-|
|:sp [filename]|打开一个新窗口，如果有指定filename，表示在新窗口打开一个新文件，否则表示两个窗口为同一个文件内容|
|[Ctrl+w+j]或[Ctrl+w+↓]|光标移动到下方的窗口|
|[Ctrl+w+k]或[Ctrl+w+↑]|光标移动到上方的窗口|
|[Ctrl+w+q]|其实就是:q，结束离开当前窗口|

