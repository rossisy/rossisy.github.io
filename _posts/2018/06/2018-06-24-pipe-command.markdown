---
layout: post
title: "pipe commands"
date: 2018-06-24 10:00:00 +0800
categories: shell
---
# 管道命令
每个管道后面接的必须是一个命令，且这个命令要可以接受standard input的数据，这样的命令才可以称为管道命令，如less，more，head，tail等。

## 选取命令-cut，grep
选取命令通常是针对行来分析的。
### cut
将一段信息的某一段“切”出来，处理的信息是以“行”为单位。
cut -d 'seperator' -f fields
按分隔符（seperator）将行分成几部分并取出f制定的第几部分。
cut -c 字符范围
对于排列整齐的信息，将行的指定字符范围的的信息取出。
参数：
    -d: 后面接分隔字符，与-f一起使用
    -f: 依据-d的分割字符将一段信息切割成为数段，用-f取出第几段的意思
    -c: 以字符（characters）为单位取出固定字符区间

### grep
分析一行信息，若当中有grep的信息，就将该行取出。
grep [-acinv] [--color=auto] '查找字符串' filename
参数:
    -a: 将binary文件以text文件的方式查找数据
    -c: 计算找到‘查找字符串’的次数
    -i: 忽略大小写
    -n: 输出行号
    -v: 反向选择，即显示出没有‘查找字符串’内容的那一行
grep的一些高级参数：
grep [-A] [-B] '查找字符串' filename
	-A: 后面可加数字，为after的意思，除了列出该行外，后续的n行也列出来
	-B: 后面可加数字，为before的意思，除了列出该行外，前面的n行也列出来

### sort
根据不同的数据类型进行排序。排序的字符与语系的编码有关，因此需要排序时，建议使用LANG=C来让语系统一，数据排序比较好一些。
sort [-fbMnrtuk] [file or stdin]
参数：
    -f：忽略大小写的差异，例如A与a视为编码相同
    -b：忽略最前面的空格符部分
    -M：以月份的名字来排序，例如JAN，DEC等的排序方法
    -n：使用“纯数字”进行排序（默认是以文字类型来排序的）
    -r：反向排序
    -u：就是uniq，相同的数据中，仅出现一行代表
    -t：分隔符，默认是用[Tab]键来分隔
    -k：以哪个区间（field）来进行排序的意思

### uniq
筛选相同的数据
uniq [-ic]
参数：
    -i：忽略大小写字符的不同
    -c：进行计数

### wc
wc [-lwn]
参数：
    -l：仅列出行
    -w：仅列出多少字（英文单字）
    -m：多少字符

### tee
双向重定向
tee [-a] file
参数：
    -a：以累加（append）的方式，将数据加入file当中

### tr
删除一段信息当中的文字，或者是进行文字信息的替换
tr [-ds] SET1 ...
参数：
    -d：删除信息当中的SET1这个字符串
    -s：替换掉重复的字符

### col
col [-xb]
参数：
    -x：将tab键转换成对等的空格键
    -b：在文字内有反斜杠时，仅保留反斜杠最后接的那个字符

### join
用于处理两个文件之间的数据，主要是将两个文件当中有相同数据的那一行加在一起
join [-ti12] file1 file2
参数：
    -t：join默认以空格符分隔数据，并且对比“第一个字段”的数据，如果两个文件相同，则将两条数据连成一行，且第一个字段放在第一个
    -i：忽略大小写的差异
    -1：这个是数字的1，代表第一个文件要用哪个字段来分析的意思
    -2：代表第二个文件要用哪个字段来分析的意思

### paste
将两个文件的两行贴在一起，中间以[tab]键隔开
paste [-d] file1 file2
参数：
    -d：后面可以接分隔字符，默认是以[tab]来分隔的
    -：如果file部分写成-，表示来自standard input的数据的意思

### expand
将[tab]键转成空格键
expand [-t] file
参数：
    -t：设置替换[tab]键的空格键个数

### split
将文件依据文件大小或行数来切割成小文件
split [-bl] file PREFIX
参数：
	-b：以大小来切割文件，可指定单位，如b，k，m等
	-l：以行数来进行切割
	PREFIX：代表前导符，可作为切割文件的前导文字

### xargs
可以读入stdin的数据，并且以空格符或断行字符进行分辨，将stdin的数据分隔成为arguments
xargs [-0epn] command
参数：
	-0：如果输入的stdin含有特殊字符，例如\`，\，空格键等字符时，这个参数可以将它还原成一般字符。这个参数可以用于特殊状态
	-e：这个是EOF（end of file）的意思。后面可以接一个字符串，当xargs分析到这个字符串时，就会停止继续工作
	-p：在执行明个命令的参数时，都会询问用户的意思
	-n：后面接次数，每次command命令执行时，要使用几个参数的意思
当xargs后面没有接任何的命令时，默认是以echo来进行输出

### sed
stream的编辑器, 可以分析standard input或指定的文件，而且sed还可以将数据进行替换、删除、新增、选取特定行等的功能。
sed [-nefr] [动作]
参数：
	-n：使用安静（silent）模式。在一般sed的用法中，所有来自STDIN的数据一般都会被列出到屏幕上。但如果加上-n参数后，则只有经过sed特殊处理的那一行（或者操作）才会被列出来。
	-e：直接在命令行模式上进行sed的动作编辑
	-f：直接将sed的动作写在一个文件内，-f filename则可以知晓filename内的sed动作
	-r：sed的动作支持的是扩展型正则表达式的语法（默认是基础正则表达式语法）
	-i：直接修改读取的文件内容，而不是由屏幕输出
动作说明：
[n1[,n2]] function
	n1,n2：不见得会存在，一般代表选择进行动作的行数，举例来说，如果动作是需要在10到20行之间进行的，则“10,20[动作行为]"
function有下面这些参数：
	a：新增，a的后面可以接字符串，而这些字符串会在新的一行出现（目前的下一行）
	c：替换，c的后面可以接字符串，这些字符串可以替换n1，n2之间的行
	d：删除，因为是删除，所以d后面通常不接任何参数
	i：插入，i的后面可以接字符串，而这些字符串会在新的一行出现（目前的上一行）
	p：打印，也就是将某个选择的数据打印出来。通常p会与参数sed -n一起运行
	s：替换，可以直接进行替换的工作。通常这个s的动作可以搭配正则表达式。

