---
layout: post
title: "Disk Quota"
date: 2019-01-10 10:00:00 +0800
categories: Linux 
---

# 磁盘配额（quota）的应用与实践

## 什么是quota
quota用于给系统中的用户分配磁盘容量。

### 其一般用途有：
1. 针对www server，每个用户的网页空间的容量限制
2. 针对mail server，每个用户的邮件空间限制
3. 针对file server，每个用户的最大可用网络硬盘空间限制
4. 针对系统主机，某一用户组所能使用的最大磁盘配额，或某一用户的最大磁盘配额，甚至在限制了用户组之后在限制个人

### quota使用限制：
仅能针对整个文件系统
内核必须支持quota
只对一般身份用户有效

### quota的规范设置选项
容量限制或文件数量限制（block或inode）
    限制inode用量：管理用户可以新建的“文件数量”
	限制block用量：管理用户磁盘容量的限制
soft/hard
inode/block的限制值都有两个，分别是soft与hard。通常hard限制值要比soft还要高。hard表示用户的用量绝对不会超过这个限制值，soft表示用户在低于soft限值时，可以正常使用磁盘，但若超过soft且低于hard的限值，每次登陆系统时，系统会主动发出磁盘即将爆满的警告信息，且会给予一个宽限时间（gracetime）。不过，如果用户在宽限时间倒数期间就将容量再次降低于soft限值之下，则宽限时间会停止。
会倒计时的宽限时间（gracetime）
默认的宽限时间为7天，如果7天内都不进行任何磁盘管理，那么soft限制值会即刻替代hard限值来作为quota的限制

